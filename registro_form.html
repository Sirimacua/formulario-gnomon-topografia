<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GNOMON Topografía — Solicitud de cita (Recepción de equipo)</title>
  <meta name="description" content="Formulario de solicitud de cita para recepción o envío de equipos al laboratorio GNOMON Topografía." />
  <style>
    :root{
      --bg:#f5f2e8; --fg:#1f2937; --muted:#6b7280; --accent:#111827; --ok:#065f46; --danger:#991b1b; --card:#ffffff; --border:#e5e7eb;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif;color:var(--fg);background:var(--bg)}
    .container{max-width:880px;margin:auto;padding:24px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 10px 20px rgba(0,0,0,.05)}
    header{padding:20px 24px;border-bottom:1px solid var(--border);display:flex;gap:16px;align-items:center}
    header img{width:44px;height:44px}
    header h1{font-size:1.25rem;margin:0}
    header p{margin:2px 0 0;color:var(--muted);font-size:.95rem}
    form{padding:20px 24px}
    fieldset{border:none;padding:0;margin:0 0 22px}
    legend{font-weight:700;margin-bottom:10px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    @media (max-width:720px){.grid{grid-template-columns:1fr}}
    label{display:block;font-weight:600;margin:6px 0}
    .hint{color:var(--muted);font-size:.9rem}
    input[type=text],input[type=tel],input[type=email],input[type=date],select{width:100%;padding:12px 12px;border:1px solid var(--border);border-radius:12px;background:#fff;font-size:1rem}
    .segmented{display:flex;border:1px solid var(--border);border-radius:12px;overflow:hidden}
    .segmented input{display:none}
    .segmented label{flex:1;padding:10px 12px;text-align:center;cursor:pointer;background:#fff}
    .segmented input:checked + label{background:var(--accent);color:#fff}
    .consents{background:#fafafa;border:1px solid var(--border);border-radius:12px;padding:12px}
    .consents label{font-weight:500}
    .error{color:var(--danger);font-size:.92rem;display:none}
    .success{color:var(--ok);font-size:.95rem;display:none}
    .actions{display:flex;gap:12px;justify-content:flex-end;margin-top:8px}
    button{appearance:none;border:none;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
    .primary{background:var(--accent);color:#fff}
    .secondary{background:#fff;color:var(--fg);border:1px solid var(--border)}
    footer{padding:16px 24px;border-top:1px solid var(--border);color:var(--muted);font-size:.9rem}
    a{color:var(--fg)} a:hover{text-decoration:none}
  </style>
</head>
<body>
  <div class="container">
    <div class="card" role="region" aria-labelledby="titulo">
      <header>
        <!-- Reemplaza src por tu logo real cuando lo tengas alojado -->
        <img src="https://placehold.co/88x88/png" alt="Logo GNOMON" />
        <div>
          <h1 id="titulo">Solicitud de cita — Recepción de equipo</h1>
          <p>Completa los datos básicos. Este formulario funciona para <strong>presencial</strong> o <strong>envío</strong>.</p>
        </div>
      </header>

      <form id="form-cita" method="post" action="https://example.com/api/gnomon/registro-recepcion">
        <!-- ⚠️ Reemplaza action por tu endpoint real cuando lo tengas listo (Cloud Functions / API propia). -->

        <!-- 1. Datos del cliente -->
        <fieldset>
          <legend>1) Datos del cliente</legend>
          <div class="grid" role="group" aria-label="Tipo de cliente">
            <div>
              <label>Tipo de cliente</label>
              <div class="segmented" role="tablist" aria-label="Tipo de cliente">
                <input type="radio" id="cli_persona" name="tipo_cliente" value="Persona" checked>
                <label for="cli_persona" role="tab" aria-selected="true">Persona</label>
                <input type="radio" id="cli_empresa" name="tipo_cliente" value="Empresa">
                <label for="cli_empresa" role="tab" aria-selected="false">Empresa</label>
              </div>
            </div>
            <div>
              <label for="identificacion">Cédula o NIT</label>
              <input id="identificacion" name="identificacion" type="text" inputmode="numeric" autocomplete="off" required placeholder="Ej. 123456789-1" />
            </div>
            <div>
              <label for="nombre_razon">Nombre completo o Razón social</label>
              <input id="nombre_razon" name="nombre_razon" type="text" required placeholder="Ej. Sergio Espinosa / Topografía Andina SAS" />
            </div>
            <div>
              <label for="telefono">Teléfono o WhatsApp</label>
              <input id="telefono" name="telefono" type="tel" required placeholder="Ej. +57 315 299 9158" />
            </div>
            <div>
              <label for="email">Correo electrónico</label>
              <input id="email" name="email" type="email" required placeholder="Ej. contacto@gnomon.com" />
            </div>
          </div>
        </fieldset>

        <!-- 2. Datos del equipo -->
        <fieldset>
          <legend>2) Datos del equipo</legend>
          <div class="grid">
            <div>
              <label for="tipo_equipo">Tipo de equipo</label>
              <select id="tipo_equipo" name="tipo_equipo" required>
                <option value="">Selecciona…</option>
                <option>Estación Total</option>
                <option>Nivel automático</option>
                <option>Receptor GNSS</option>
                <option>Teodolito</option>
                <option>Distanciómetro</option>
                <option>Accesorio</option>
              </select>
            </div>
            <div>
              <label for="marca">Marca</label>
              <input id="marca" name="marca" type="text" required placeholder="Ej. Leica, Topcon, Sokkia" />
            </div>
            <div>
              <label for="modelo">Modelo (opcional)</label>
              <input id="modelo" name="modelo" type="text" placeholder="Ej. TS06, B40A, GRX3" />
            </div>
          </div>
        </fieldset>

        <!-- 3. Modalidad y fecha programada -->
        <fieldset>
          <legend>3) Modalidad y fecha</legend>
          <div class="grid">
            <div>
              <label>Modalidad</label>
              <div class="segmented">
                <input type="radio" id="mod_pres" name="modalidad" value="Presencial" checked>
                <label for="mod_pres">Presencial</label>
                <input type="radio" id="mod_env" name="modalidad" value="Envio">
                <label for="mod_env">Envío</label>
              </div>
            </div>
            <div>
              <label id="lbl_fecha" for="fecha_programada">Fecha en que traerá el equipo</label>
              <input id="fecha_programada" name="fecha_programada" type="date" required />
              <p class="hint" id="hint_fecha">Si eliges envío, será la fecha estimada de despacho.</p>
            </div>
          </div>
        </fieldset>

        <!-- 4. Consentimientos -->
        <fieldset>
          <legend>4) Autorizaciones</legend>
          <div class="consents">
            <div style="margin-bottom:10px">
              <input id="c_priv" name="acepta_politica" type="checkbox" required>
              <label for="c_priv">He leído y acepto la <a href="#" target="_blank" rel="noopener">Política de Tratamiento de Datos Personales</a>.</label>
            </div>
            <div>
              <input id="c_msg" name="acepta_mensajeria" type="checkbox" required>
              <label for="c_msg">Autorizo recibir recordatorios por WhatsApp/SMS y correo electrónico relacionados con mi solicitud.</label>
            </div>
          </div>
        </fieldset>

        <!-- Mensajes -->
        <p class="error" id="err_general" role="alert">Por favor completa los campos obligatorios y acepta las autorizaciones.</p>
        <p class="success" id="ok_general" role="status">¡Registro enviado! Gracias por tu solicitud.</p>

        <!-- Acciones -->
        <div class="actions">
          <button type="reset" class="secondary">Limpiar</button>
          <button type="submit" class="primary">Enviar solicitud</button>
        </div>
      </form>

      <footer>
        <p>
          Al enviar este formulario, aceptas que GNOMON Topografía trate tus datos con la finalidad de gestionar la cita de recepción.
          Podrás ejercer tus derechos de acceso, rectificación y supresión conforme a la Política de Datos.
        </p>
      </footer>
    </div>
  </div>

  <script>
    (function(){
      const modPres = document.getElementById('mod_pres');
      const modEnv  = document.getElementById('mod_env');
      const lblFecha = document.getElementById('lbl_fecha');
      const form = document.getElementById('form-cita');
      const err = document.getElementById('err_general');
      const ok = document.getElementById('ok_general');

      function updateFechaLabel(){
        if(modEnv.checked){
          lblFecha.textContent = 'Fecha estimada de envío';
        } else {
          lblFecha.textContent = 'Fecha en que traerá el equipo';
        }
      }
      modPres.addEventListener('change', updateFechaLabel);
      modEnv.addEventListener('change', updateFechaLabel);
      updateFechaLabel();

      form.addEventListener('submit', function(e){
        // Compatibilidad máxima: validación básica sin APIs modernas.
        err.style.display = 'none'; ok.style.display = 'none';
        const requiredIds = ['identificacion','nombre_razon','telefono','email','tipo_equipo','marca','fecha_programada'];
        for(const id of requiredIds){
          const el = document.getElementById(id);
          if(!el || !el.value){
            err.style.display = 'block';
            e.preventDefault();
            return false;
          }
        }
        const c1 = document.getElementById('c_priv');
        const c2 = document.getElementById('c_msg');
        if(!c1.checked || !c2.checked){
          err.style.display = 'block';
          e.preventDefault();
          return false;
        }
        // Aquí no hacemos fetch ni JS avanzado para garantizar compatibilidad.
        // El envío se hará como POST estándar (application/x-www-form-urlencoded) al endpoint del atributo action.
      });
    })();
  </script>
</body>
</html>
